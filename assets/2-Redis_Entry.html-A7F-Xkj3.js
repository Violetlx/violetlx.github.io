import{_ as c,c as o,b as e,a as n,d as a,e as p,w as u,r as t,o as r}from"./app-BDBTreNG.js";const k="/assets/image-20250116170919611-BT2wV7kw.png",d="/assets/image-20250116171000418-BuW9qlHN.png",m="/assets/image-20250116172443078-CAHk45xO.png",b="/assets/image-20250116175638277-DR83jGEh.png",v="/assets/image-20250117101025972-BWuq83k_.png",g="/assets/image-20250117171632582-Db6mUYjg.png",h="/assets/image-20250117171702322-BhEbnQo0.png",q="/assets/image-20250212104338230-CffJeWr4.png",y="/assets/image-20250212104400333-DwFPSh24.png",S={},R={href:"https://redis.io/commands",target:"_blank",rel:"noopener noreferrer"};function E(x,s){const l=t("ExternalLinkIcon"),i=t("font");return r(),o("div",null,[s[10]||(s[10]=e('<p><img src="https://bizhi1.com/wp-content/uploads/2025/01/demon-slayer-shinobu-kochos-butterfly-garden-desktop-wallpaper.jpg" alt="鬼灭之刃小忍的蝴蝶园"></p><h2 id="redis-常见命令" tabindex="-1"><a class="header-anchor" href="#redis-常见命令"><span>Redis 常见命令</span></a></h2><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>① Redis 数据结构介绍</p><p>② Redis 通用命令</p><p>③ String 类型</p><p>④ Hash 类型</p><p>⑤ List 类型</p><p>⑥ Set 类型</p><p>⑦ SortedSet 类型</p></div><h2 id="_1-redis-数据结构介绍" tabindex="-1"><a class="header-anchor" href="#_1-redis-数据结构介绍"><span>① Redis 数据结构介绍</span></a></h2><p>Redis 是典型的 key-value 数据库，key 一般是字符串，而 value 包含很多不同的数据类型：</p><p><img src="'+k+'" alt="image-20250116170919611"></p>',6)),n("p",null,[s[1]||(s[1]=a("Redis 为了方便我们学习，将操作不同数据类型的命令也做了分组，在官网（ ")),n("a",R,[s[0]||(s[0]=a("https://redis.io/commands ")),p(l)]),s[2]||(s[2]=a("）可以查看到不同的命令："))]),s[11]||(s[11]=n("p",null,[n("img",{src:d,alt:"image-20250116171000418"})],-1)),s[12]||(s[12]=n("p",null,"不同类型的命令称为一个 group ，我们也可以通过 help 命令查看各种不同 group 的命令：",-1)),s[13]||(s[13]=n("p",null,[n("img",{src:m,alt:"image-20250116172443078"})],-1)),s[14]||(s[14]=n("p",null,"接下来，我们就学习常见的五种基本数据类型的相关命令。",-1)),s[15]||(s[15]=n("h2",{id:"_2-redis-通用命令",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-redis-通用命令"},[n("span",null,"② Redis 通用命令")])],-1)),s[16]||(s[16]=n("p",null,"通用指令是部分数据类型的，都可以使用的指令，常见的有：",-1)),n("ul",null,[n("li",null,[s[4]||(s[4]=n("code",null,"KEYS",-1)),s[5]||(s[5]=a("：查看符合模板的所有 key，")),p(i,{color:"red"},{default:u(()=>s[3]||(s[3]=[a("不建议在生产环境设备上使用")])),_:1,__:[3]})]),s[6]||(s[6]=n("li",null,[n("code",null,"DEL"),a("：删除一个指定的 key")],-1)),s[7]||(s[7]=n("li",null,[n("code",null,"EXISTS"),a("：判断 key 是否存在")],-1)),s[8]||(s[8]=n("li",null,[n("code",null,"EXPIRE"),a("：给一个 key 设置有效期，有效期到期时该 key 会被自动删除")],-1)),s[9]||(s[9]=n("li",null,[n("code",null,"TTL"),a("：查看一个 key 的剩余有效期（大于0为剩余的秒数，-2为无效，-1为永久有效）")],-1))]),s[17]||(s[17]=e(`<p>通过 help [command] 命令可以查看一个命令的具体用法，例如：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 查看keys命令的帮助信息：</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">help</span> keys</span>
<span class="line"></span>
<span class="line">KEYS pattern</span>
<span class="line">summary: Find all keys matching the given pattern</span>
<span class="line">since: <span class="token number">1.0</span>.0</span>
<span class="line">group: generic</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-string-类型" tabindex="-1"><a class="header-anchor" href="#_3-string-类型"><span>③ String 类型</span></a></h2><p>String 类型，也就是字符串类型，是 Redis 中最简单的存储类型。</p><p>其 value 是字符串，不过根据字符串的格式不同，又可以分为 3 类：</p><ul><li><code>String</code>：普通字符串</li><li><code>int</code>：整数类型，可以做自增、自减操作</li><li><code>float</code>：浮点类型，可以做自增、自减操作</li></ul><p>不管是哪种格式，底层都是字节数组形式存储，只不过是编码方式不同。字符串类型的最大空间不能超过 512m.</p><p><img src="`+b+`" alt="image-20250116175638277"></p><h3 id="_1-string-的常见命令" tabindex="-1"><a class="header-anchor" href="#_1-string-的常见命令"><span>1 String 的常见命令</span></a></h3><p>String 的常见命令有：</p><ul><li><code>SET</code>：添加或者修改已经存在的一个 String 类型的键值对</li><li><code>GET</code>：根据 key 获取 String 类型的 value</li><li><code>MSET</code>：批量添加多个 String 类型的键值对</li><li><code>MGET</code>：根据多个 key 获取多个 String 类型的 value</li><li><code>INCR</code>：让一个整形 key 自增 1</li><li><code>INCRBY</code>：让一个整形的 key 自增并指定步长，例如 incrby num 2 让 num 值自增 2</li><li><code>INCRBYFLOAT</code>：让一个浮点类型的数字自增并指定步长</li><li><code>SETNX</code>：添加一个 String 类型的键值对，前提是这个 key 不存在，否则不执行</li><li><code>SETEX</code>：添加一个 String 类型的键值对，并且指定有效期</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> name jack</span>
<span class="line">OK</span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get name</span>
<span class="line"><span class="token string">&quot;jack&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> mset k1 v1 k2 v2 k3 v3</span>
<span class="line">OK</span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> mget k1 k2 k3</span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">18</span></span>
<span class="line">OK</span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> incr age</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">19</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get age</span>
<span class="line"><span class="token string">&quot;19&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> incrby age <span class="token number">2</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">21</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get age</span>
<span class="line"><span class="token string">&quot;21&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> incrby age <span class="token number">2</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">23</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get age</span>
<span class="line"><span class="token string">&quot;23&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> score <span class="token number">82.5</span></span>
<span class="line">OK</span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get score</span>
<span class="line"><span class="token string">&quot;82.5&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> incrbyfloat score <span class="token number">12.5</span></span>
<span class="line"><span class="token string">&quot;95&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get score</span>
<span class="line"><span class="token string">&quot;95&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># setnx 类似于 set ... nx</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">help</span> setnx</span>
<span class="line"></span>
<span class="line">  SETNX key value</span>
<span class="line">  summary: Set the value of a key, only <span class="token keyword">if</span> the key does not exist</span>
<span class="line">  since: <span class="token number">1.0</span>.0</span>
<span class="line">  group: string</span>
<span class="line"></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *</span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k2&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;k3&quot;</span></span>
<span class="line"><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;k1&quot;</span></span>
<span class="line"><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span></span>
<span class="line"><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;score&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> setnx name lisi</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get name</span>
<span class="line"><span class="token string">&quot;jack&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> setnx name2 lisi</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get name2</span>
<span class="line"><span class="token string">&quot;lisi&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">help</span> <span class="token builtin class-name">set</span></span>
<span class="line"></span>
<span class="line">  SET key value <span class="token punctuation">[</span>expiration EX seconds<span class="token operator">|</span>PX milliseconds<span class="token punctuation">]</span> <span class="token punctuation">[</span>NX<span class="token operator">|</span>XX<span class="token punctuation">]</span></span>
<span class="line">  summary: Set the string value of a key</span>
<span class="line">  since: <span class="token number">1.0</span>.0</span>
<span class="line">  group: string</span>
<span class="line"></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> name wnagwu nx</span>
<span class="line"><span class="token punctuation">(</span>nil<span class="token punctuation">)</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get name</span>
<span class="line"><span class="token string">&quot;jack&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 将set于expire结合起来了，添加并设置有效期</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> setex name <span class="token number">10</span> jack</span>
<span class="line">OK</span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token parameter variable">-2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-key-结构" tabindex="-1"><a class="header-anchor" href="#_2-key-结构"><span>2 key 结构</span></a></h3><p>Redis 没有类似 MySQL 中的 Table 的概念，我们该如何区分不同类型的 key 呢？</p><p>例如，需要存储用户、商品信息到 redis ，有一个用户 id 是 1 ，有一个商品 id 恰好也是 1，此时如果使用 id 作为 key ，那就会冲突了，该怎么办呢？</p><p>我们可以通过给 key 添加前缀加以区分，不过这个前缀不是随便加的，有一定的规范：</p><p>Redis 的 key 允许有多个单词形成层级结构，多个单词之间用 <code>:</code> 隔开，格式如下：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">项目名<span class="token operator">:</span>业务名<span class="token operator">:</span>类型<span class="token operator">:</span>id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个格式并非固定，也可以根据自己的需求来删除或添加词条。这样一来，我们就可以把不同类型的数据区分开来了。从而避免了 key 的冲突问题。</p><p>例如我们的项目名称叫 heima，有 user 和 product 两种不同类型的数据，我们可以这样定义 key：</p><ul><li>user 相关的 key ：<code>heima:user:1</code></li><li>product 相关的 key：<code>heima:product:1</code></li></ul><p>如果 value 是一个 java 对象，例如一个 User 对象，则可以将对象序列化为 JSON 字符串后存储：</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">| KEY             | VALUE                                      |</span>
<span class="line">| <span class="token operator">:</span>-------------- | ------------------------------------------ |</span>
<span class="line">| heima<span class="token operator">:</span>user<span class="token operator">:</span><span class="token number">1</span>    | &#39;<span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jack&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">}</span>&#39;       |</span>
<span class="line">| heima<span class="token operator">:</span>product<span class="token operator">:</span><span class="token number">1</span> | &#39;<span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;小米11&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">4999</span><span class="token punctuation">}</span>&#39; |</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>并且，在 Redis 的桌面客户端中，还会以相同前缀作为层级结构，让数据看起来层次分明，关系清晰：</p><p><img src="`+v+'" alt="image-20250117101025972"></p><h2 id="_4-hash-类型" tabindex="-1"><a class="header-anchor" href="#_4-hash-类型"><span>④ Hash 类型</span></a></h2><p>Hash 类型，也叫散列，其 value 是一个无序字典，类似于 Java 中的 HashMap 结构。</p><p>String 结构是将对象序列化为 JSON 字符串后存储，当需要修改对象某个字段时很不方便：</p><p><img src="'+g+'" alt="image-20250117171632582"></p><p>Hash 结构可以将对象中的每个字段独立存储，可以针对单个字段做 CRUD：</p><p><img src="'+h+`" alt="image-20250117171702322"></p><p>Hash 的常见命令有：</p><ul><li><code>HSET key field value</code>：添加或者修改 hash 类型的 key 的 field 的值</li><li><code>HGET key field</code>：获取一个 hash 类型的 key 的 field 的值</li><li><code>HMSET</code>：批量添加多个 hash 类型 key 的 field 的值</li><li><code>HMGET</code>：批量获取多个 hash 类型 key 的 field 的值</li><li><code>HGETALL</code>：获取一个 hash 类型的 key 中的所有的 field 和 value</li><li><code>HKEYS</code>：获取一个 hash 类型的 key 中的所有 field</li><li><code>HVALS</code>：获取一个 hash 类型的 key 中的所有 value</li><li><code>HINCRBY</code>：让一个 hash 类型的 key 的字段值自增并指定步长</li><li><code>HSETNX</code>：添加一个 hash 类型的 key 的 field 值，前提是这个 field 不存在，否则不执行</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hset heima:user:2 name jack</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hget heima:user:2 name</span>
<span class="line"><span class="token string">&quot;jack&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hset heima:user:2 age <span class="token number">21</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hget heima:user:2 age</span>
<span class="line"><span class="token string">&quot;21&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hset heima:user:2 age <span class="token number">17</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hget heima:user:2 age</span>
<span class="line"><span class="token string">&quot;17&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hmset heima:user:3 name lisi age <span class="token number">20</span> sex <span class="token function">man</span></span>
<span class="line">OK</span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hmget heima:user:3 name age sex</span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;lisi&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;20&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;man&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hgetall heima:user:3</span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;lisi&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span></span>
<span class="line"><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;20&quot;</span></span>
<span class="line"><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;sex&quot;</span></span>
<span class="line"><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;man&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hkeys heima:user:3</span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;sex&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hvals heima:user:3</span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;lisi&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;20&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;man&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hincrby heima:user:3 age <span class="token number">2</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">22</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hincrby heima:user:3 age <span class="token number">2</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">24</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hget heima:user:3 age</span>
<span class="line"><span class="token string">&quot;24&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hsetnx heima:user:3 name zs</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hget heima:user:3 name</span>
<span class="line"><span class="token string">&quot;lisi&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hsetnx heima:user:3 phone <span class="token number">17286537629</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> hget heima:user:3 phone</span>
<span class="line"><span class="token string">&quot;17286537629&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-list-类型" tabindex="-1"><a class="header-anchor" href="#_5-list-类型"><span>⑤ List 类型</span></a></h2><p>Redis 中的 List 类型与 Java 中的 LinkedList 类似，可以看作是一个双向链表。既可以支持正向检索也可以支持反向检索。</p><p>特征也与 LinkedList 类似：</p><ul><li>有序</li><li>元素可以重复</li><li>插入和删除快</li><li>查询速度一般</li></ul><p>常用来存储一个有序数据，例如：朋友圈点赞列表，评论列表等。</p><p>List 的常见命令有：</p><ul><li><code>LPUSH key element ...</code>：向列表左侧插入一个或多个元素</li><li><code>LPOP key</code>：移除并返回列表左侧的第一个元素，没有则返回 null</li><li><code>RPUSH key element ...</code>：向列表右边插入一个或多个元素</li><li><code>RPOP key</code>：移除并返回列表右侧的第一个元素，没有则返回 null</li><li><code>LRANGE key start end</code>：返回一段角标范围内的所有元素</li><li><code>BLPOP 和 BRPOP</code>：与 LPOP 和 RPOP 类似，只不过在没有元素时等待指定时间，而不是直接返回 null</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> LPUSH <span class="token function">users</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> RPUSH <span class="token function">users</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> LPOP <span class="token function">users</span></span>
<span class="line"><span class="token string">&quot;3&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> RPOP <span class="token function">users</span></span>
<span class="line"><span class="token string">&quot;6&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> LRANGE <span class="token function">users</span> <span class="token number">1</span> <span class="token number">2</span></span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;4&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>思考：</strong></p><p>1.如何利用 List 结构模拟一个栈？</p><ul><li>入口和出口在同一边</li></ul><p>2.如何利用 List 结构模拟一个队列？</p><ul><li>入口和出口在不同边</li></ul><p>3.如何利用 List 结构模拟一个阻塞队列？</p><ul><li>入口和出口在不同边</li><li>出队时采用 BLPOP 或 BRPOP</li></ul><h2 id="_6-set-类型" tabindex="-1"><a class="header-anchor" href="#_6-set-类型"><span>⑥ Set 类型</span></a></h2><p>Redis 的 set 结构与 Java 中的 HashSet 类似，可以看作是一个 value 为 null 的 HashMap。因为也是一个 hash 表，因此具备与 HashSet 类似的特征：</p><ul><li>无序</li><li>元素不可重复</li><li>查找快</li><li>支持交集、并集、差集等功能</li></ul><p>Set 的常见命令有：</p><ul><li><code>SADD key member ...</code>：向 set 中添加一个或多个元素</li><li><code>SREM key member ...</code>：移除 set 中的指定元素</li><li><code>SCARD key</code>：返回 set 中元素的个数</li><li><code>SISMEMBER key member</code>：判断一个元素是否存在 set 中</li><li><code>SMEMBERS</code>：获取 set 中的所有元素</li><li><code>SINTER key1 key2 ...</code>：求 key1 和 key2 的交集</li><li><code>SDIFF key1 key2 ...</code>：求 key1 和 key2 的差集</li><li><code>SUNION key1 key2 ...</code>：求 key1 和 key2 的并集</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> sadd s1 a b c</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SMEMBERS s1</span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SREM s1 a</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SISMEMBER s1 a</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SISMEMBER s1 b</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SCARD s1</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例如两个集合：s1和s2:</p><p><img src="`+q+'" alt="image-20250212104338230"></p><p>求交集：SINTER s1 s2</p><p>求s1与s2的不同：SDIFF s1 s2</p><p><img src="'+y+`" alt="image-20250212104400333"></p><p>练习：</p><p>1.将下列数据用 Redis 的 Set 集合来存储：</p><ul><li>张三的好友有：李四、王五、赵六</li><li>李四的好友有：王五、麻子、二狗</li></ul><p>2.利用 Set 的命令实现下列功能：</p><ul><li>计算张三的好友有几人</li><li>计算张三和李四有哪些共同好友</li><li>查询哪些人是张三的好友却不是李四的好友</li><li>查询张三和李四的好友总共有哪些人</li><li>判断李四是否是张三的好友</li><li>将李四从张三的好友列表中移除</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SADD zs <span class="token function">ls</span> ww zl</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SADD <span class="token function">ls</span> ww mz eg</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SMEMBERS zs</span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zl&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;ww&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;ls&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SMEMBERS <span class="token function">ls</span></span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;eg&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;mz&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;ww&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SCARD zs</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SINTER zs <span class="token function">ls</span></span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;ww&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SDIFF zs <span class="token function">ls</span></span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zl&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;ls&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SUNION zs <span class="token function">ls</span></span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;ls&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;ww&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;eg&quot;</span></span>
<span class="line"><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;zl&quot;</span></span>
<span class="line"><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;mz&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SISMEMBER zs <span class="token function">ls</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SISMEMBER <span class="token function">ls</span> zs</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SREM zs <span class="token function">ls</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> SMEMBERS zs</span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zl&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;ww&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-sortedset-类型" tabindex="-1"><a class="header-anchor" href="#_7-sortedset-类型"><span>⑦ SortedSet 类型</span></a></h2><p>Redis 的 SortedSet 是一个可排序的 set 集合，与 Java 中的 TreeSet 有些类似，但底层数据结构却差别很大。SortedSet 中的每一个元素都带有一个 score 属性，可以基于 score 属性对元素排序，底层的实现是一个跳表 (SkipList) 加 hash 表。</p><p>SortedSet 具备下列特性：</p><ul><li>可排序</li><li>元素不重复</li><li>查询速度快</li></ul><p>因为 SortedSet 的可排序特性，经常被用来实现排行榜这样的功能。</p><p>SortedSet 的常见命令有：</p><ul><li><code>ZADD key score member</code>：添加一个或多个元素到 SortedSet ，如果已经存在则更新其 score 值</li><li><code>ZREM key member</code>：删除 SortedSet 中的一个指定元素</li><li><code>ZSCORE key member</code>：获取 SortedSet 中的指定元素的 score 值</li><li><code>ZRANK key member</code>：获取 SortedSet 中的指定元素的排名</li><li><code>ZCARD key</code>：获取 SortedSet 中的元素个数</li><li><code>ZCOUNT key min max</code>：统计 score 值在给定范围内的所有元素的个数</li><li><code>ZINCRBY key increment member</code>：让 SortedSet 中的指定元素自增，步长为指定的 increment 值</li><li><code>ZRANGE key min max</code>：按照 score 排序后，获取指定排名范围内的元素</li><li><code>ZRANGEBYSCORE key min max</code>：按照 score 排序后，获取指定 score 范围内的元素</li><li><code>ZDIFF、ZINTER、ZUNION</code>：求差集、交集、并集</li></ul><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>注意：所有的排名默认都是升序，如果要降序则在命令的 Z 后面添加 REV 即可，例如：</p><ul><li><strong>升序</strong>获取sorted set 中的指定元素的排名：ZRANK key member</li><li><strong>降序</strong>获取sorted set 中的指定元素的排名：ZREVRANK key memeber</li></ul></div><p>练习题：</p><p>将班级的下列学生得分存入 Redis 的 SortedSet 中：</p><p>Jack 85, Lucy 89, Rose 82, Tom 95, Jerry 78, Amy 92, Miles 76</p><p>并实现下列功能：</p><ul><li>删除Tom同学</li><li>获取Amy同学的分数</li><li>获取Rose同学的排名</li><li>查询80分以下有几个学生</li><li>给Amy同学加2分</li><li>查出成绩前3名的同学</li><li>查出成绩80分以下的所有同学</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZADD stus <span class="token number">85</span> Jack <span class="token number">89</span> Lucy <span class="token number">82</span> Rose <span class="token number">95</span> Tom <span class="token number">78</span> Jerry <span class="token number">92</span> Amy <span class="token number">76</span> Miles</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZREM stus Tom</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZRANK stus Rose</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZREVRANK stus Rose</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZCARD stus</span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZCOUNT stus <span class="token number">0</span> <span class="token number">80</span></span>
<span class="line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZINCRBY stus <span class="token number">2</span> Amy</span>
<span class="line"><span class="token string">&quot;94&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZINCRBY stus <span class="token parameter variable">-2</span> Amy</span>
<span class="line"><span class="token string">&quot;92&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZRANGE stus <span class="token number">0</span> <span class="token number">2</span></span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;Miles&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;Jerry&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;Rose&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZREVRANGE stus <span class="token number">0</span> <span class="token number">2</span></span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;Amy&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;Lucy&quot;</span></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;Jack&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ZRANGEBYSCORE stus <span class="token number">0</span> <span class="token number">80</span></span>
<span class="line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;Miles&quot;</span></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;Jerry&quot;</span></span>
<span class="line"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,82))])}const _=c(S,[["render",E]]),w=JSON.parse('{"path":"/docs/Middleware/Redis/Redis_Heima/1_Redis_Entry/2-Redis_Entry.html","title":"Redis常见命令","lang":"en-US","frontmatter":{"title":"Redis常见命令","date":"2025/01/16"},"headers":[{"level":2,"title":"Redis 常见命令","slug":"redis-常见命令","link":"#redis-常见命令","children":[]},{"level":2,"title":"① Redis 数据结构介绍","slug":"_1-redis-数据结构介绍","link":"#_1-redis-数据结构介绍","children":[]},{"level":2,"title":"② Redis 通用命令","slug":"_2-redis-通用命令","link":"#_2-redis-通用命令","children":[]},{"level":2,"title":"③ String 类型","slug":"_3-string-类型","link":"#_3-string-类型","children":[{"level":3,"title":"1 String 的常见命令","slug":"_1-string-的常见命令","link":"#_1-string-的常见命令","children":[]},{"level":3,"title":"2 key 结构","slug":"_2-key-结构","link":"#_2-key-结构","children":[]}]},{"level":2,"title":"④ Hash 类型","slug":"_4-hash-类型","link":"#_4-hash-类型","children":[]},{"level":2,"title":"⑤ List 类型","slug":"_5-list-类型","link":"#_5-list-类型","children":[]},{"level":2,"title":"⑥ Set 类型","slug":"_6-set-类型","link":"#_6-set-类型","children":[]},{"level":2,"title":"⑦ SortedSet 类型","slug":"_7-sortedset-类型","link":"#_7-sortedset-类型","children":[]}],"filePathRelative":"docs/Middleware/Redis/Redis_Heima/1_Redis_Entry/2-Redis_Entry.md","git":{"createdTime":1737440609000,"updatedTime":1739958647000,"contributors":[{"name":"lixuan","email":"2789968443@qq.com","commits":2}]}}');export{_ as comp,w as data};
